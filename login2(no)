login = ["s"]
password = ["a"]
m = 0
dolar = 0

def vhod():
    global m
    a = input("Введите логин\n")
    if a in login:
        b = input("Введите пароль\n")
        index = login.index(a)
        while b != password[index] and m < 3:
            m += 1
            print(f"Неверный пароль\nОсталось {3 - m} попыток")
            if m == 3:
                print("Превышено количество попыток входа")
                return False
            b = input("Введите пароль\n")
        else:
            if b == password[index]:
                print("Успешный вход")
                return True
    else:
        print("Логин не найден\n")
        c = input("Хотите зарегистрироваться? (да/нет)\n")
        if c.lower() == "да":
            new_login = input("Введите логин\n")
            new_password = input("Введите пароль\n")
            password_a = input("Подтвердите пароль\n")
            while password_a != new_password:
                print("Пароли не совпадают")
                new_password = input("Введите пароль\n")
                password_a = input("Подтвердите пароль\n")
            login.append(new_login)
            password.append(new_password)
            print("Регистрация завершена")
            return vhod()
        else:
            print("Ну как хочешь")
            return False


# Основная программа
if vhod():
    while True:
        print(f"Ваш счет {dolar}")
        g = input('''Что хотите сделать? Введите число\n1.Снять деньги\n2.Пополнить счет\n3.Выход из аккаунта\n4.Выход из программы\n''')
        try:
            g = int(g)
        except ValueError:
            print("Некорректный ввод")
            continue
        if g == 1:
            try:
                snit = int(input("Сколько вы хотите снять? "))
                if snit <= 0:
                    print("Сумма должна быть положительной")
                elif dolar < snit:
                    print("Недостаточно на счету")
                else:
                    dolar -= snit
                    print(f"Операция успешна. На счету осталось {dolar}")
            except ValueError:
                print("Некорректная сумма")
        elif g == 2:
            try:
                popol = int(input("На сколько вы хотите пополнить? "))
                if popol > 0:
                    dolar += popol
                    print(f"На вашем счету {dolar}")
                else:
                    print("Сумма должна быть положительной")
            except ValueError:
                print("Некорректная сумма")
        elif g == 3:
            print("Вы успешно вышли из аккаунта")
            vhod()
        elif g == 4:
          print("Вы успешно вышли из программы")
          break
        else:
            print("Неверный выбор")
